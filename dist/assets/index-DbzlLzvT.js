import{r as n,j as e}from"./index-7FYdZ7LW.js";import{u as I}from"./useTitle-I86CEnKF.js";const P="_storyContainer_1jsv7_31",T="_inputPanel_1jsv7_69",H="_textInput_1jsv7_117",O="_styleSelector_1jsv7_181",E="_styleSelect_1jsv7_181",J="_generateButton_1jsv7_279",D="_storyCard_1jsv7_345",R="_cardHeader_1jsv7_413",$="_styleBadge_1jsv7_449",U="_storyContent_1jsv7_475",q="_regenerateButton_1jsv7_515",s={storyContainer:P,inputPanel:T,textInput:H,styleSelector:O,styleSelect:E,generateButton:J,storyCard:D,cardHeader:R,styleBadge:$,storyContent:U,regenerateButton:q},G=()=>{var h,p;I("æ•…äº‹å®ç®±");const S="pat_BW3DvOatetgn6JG5hU112l6oCKxhpp52vACcPBJSyhkenqdfk9Bqp95nH6TrWLrw",x="https://api.coze.cn/v1/workflow/run",f="7537625801082077234",[i,w]=n.useState(""),[o,C]=n.useState("random"),[a,B]=n.useState(null),[m,l]=n.useState(""),[_,d]=n.useState(!1),u=[{value:"random",label:"ä»»æ„é£æ ¼",emoji:"ğŸ²"},{value:"fantasy",label:"å¥‡å¹»å†’é™©",emoji:"ğŸ§™â€â™‚ï¸"},{value:"sci-fi",label:"ç§‘å¹»æœªæ¥",emoji:"ğŸš€"},{value:"fairy-tale",label:"ç»å…¸ç«¥è¯",emoji:"ğŸ°"},{value:"mystery",label:"æ‚¬ç–‘æ¨ç†",emoji:"ğŸ”"},{value:"animal",label:"åŠ¨ç‰©ä¸–ç•Œ",emoji:"ğŸ¾"},{value:"historical",label:"å†å²ä¼ å¥‡",emoji:"â³"}],v=async(t=!1)=>{try{if(!i.trim()){l("è¯·è¾“å…¥å…³é”®è¯");return}t?d(!0):l("ç”Ÿæˆä¸­...");const r={user_input:i};o!=="random"&&(r.story_style=o);const c=await fetch(x,{method:"POST",headers:{Authorization:`Bearer ${S.trim()}`,"Content-Type":"application/json"},body:JSON.stringify({workflow_id:f,parameters:r})});if(!c.ok){const j=await c.json();throw new Error(j.msg||`HTTPé”™è¯¯: ${c.status}`)}const N=await c.text();let y;try{y=JSON.parse(N)}catch(j){throw new Error(`å“åº”è§£æå¤±è´¥: ${j.message}`)}if(!y.data)throw new Error("æ— æ•ˆçš„å“åº”æ ¼å¼");const g=JSON.parse(y.data),k={title:g.story_title||"æœªå‘½åæ•…äº‹",content:g.story_content||"æœªèƒ½ç”Ÿæˆå†…å®¹",style:o};B(k),l("ç”ŸæˆæˆåŠŸï¼"),d(!1)}catch(r){console.error("ç”Ÿæˆå¤±è´¥:",r),l(`é”™è¯¯: ${r.message}`),d(!1)}},b=()=>{v(!0)};return e.jsxs("div",{className:s.storyContainer,children:[e.jsxs("div",{className:s.inputPanel,children:[e.jsx("h2",{children:"âœ¨ æ•…äº‹å®ç®± âœ¨"}),e.jsx("textarea",{value:i,onChange:t=>w(t.target.value),placeholder:"è¾“å…¥å…³é”®è¯æˆ–çµæ„Ÿ (ä¾‹å¦‚ï¼šå¤ªç©ºçŒ«ã€é­”æ³•é’¥åŒ™ã€ä¼šè·³èˆçš„æ˜Ÿæ˜Ÿ...)",className:s.textInput,rows:5}),e.jsxs("div",{className:s.styleSelector,children:[e.jsx("label",{children:"æ•…äº‹é£æ ¼ï¼š"}),e.jsx("select",{value:o,onChange:t=>C(t.target.value),className:s.styleSelect,children:u.map(t=>e.jsxs("option",{value:t.value,children:[t.emoji," ",t.label]},t.value))})]}),e.jsx("button",{onClick:()=>v(!1),disabled:m.includes("ç”Ÿæˆ"),className:s.generateButton,children:m||"ç”Ÿæˆæ•…äº‹"})]}),a&&e.jsxs("div",{className:s.storyCard,children:[e.jsxs("div",{className:s.cardHeader,children:[e.jsx("h3",{children:String(a.title)}),e.jsxs("span",{className:s.styleBadge,children:[((h=u.find(t=>t.value===a.style))==null?void 0:h.emoji)||"ğŸ“–",((p=u.find(t=>t.value===a.style))==null?void 0:p.label)||"æ•…äº‹"]})]}),e.jsx("div",{className:s.storyContent,children:a.content}),e.jsx("button",{onClick:b,disabled:_,className:s.regenerateButton,children:_?"æ­£åœ¨ç”Ÿæˆ...":"å†æ¬¡ç”Ÿæˆ"})]})]})};export{G as default};
