import{i as ge,r as l,a as ie,R as N,_ as X,c as d,S as ce,b as k,B as ve,W as he,j as s,L as ee,I as te,m as $,d as G,e as be,f as P,g as je,C as xe,p as ye}from"./index-5URFNoGD.js";import{u as Ce}from"./useTitle-CQM8J28J.js";import{g as Q,p as _e,S as we,P as pe,s as Ne,u as Se,T as W,a as Oe}from"./useUserStore-DvOgVx07.js";import"./middleware-C9MzRHHY.js";import"./react-DMxRMRj9.js";function Re(){return ge?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1}function Te(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Ee(e){Ie(window,e)}function Ie(e,n){"scrollTop"in e?e.scrollTop=n:e.scrollTo(e.scrollX,n)}const ke=Re();function ue(){ke&&Ee(Te())}function ne(e,n,t){const r=e.indexOf(n);return r===-1?e:n==="-"&&r!==0?e.slice(0,r):e.slice(0,r+1)+e.slice(r).replace(t,"")}function Le(e,n=!0,t=!0){n?e=ne(e,".",/\./g):e=e.split(".")[0],t?e=ne(e,"-",/-/g):e=e.replace(/-/,"");const r=n?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(r,"")}function ze(e){const[n,t]=l.useState(e),r=l.useRef(n),h=l.useCallback(a=>{t(f=>r.current=ie(a)?a(f):a)},[n]);return[n,h,r]}const Pe=()=>{const e=l.useRef(!1);return l.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e},Fe=(e={})=>{const n=Pe(),[t,r,h]=ze(e),a=l.useCallback(f=>{n.current||r(m=>Object.assign(Object.assign({},m),ie(f)?f(m):f))},[]);return[t,a,h]};function Ae(e){const n=l.useRef(e);return n.current=e,n}const Me=e=>{const n=Ae(e);l.useEffect(()=>()=>{n.current()},[])};function se(e,n){if(e===n)return!0;for(let t=0;t<e.length;t++)if(!Object.is(e[t],n[t]))return!1;return!0}const $e=e=>(t,r,h)=>{const a=l.useRef(!1),f=l.useRef([]),m=l.useRef([]),u=l.useRef();e(()=>{var g;const x=(Array.isArray(h)?h:[h]).map(b=>Q(b));if(!a.current){a.current=!0,f.current=x,m.current=r,u.current=t();return}(x.length!==f.current.length||!se(x,f.current)||!se(r,m.current))&&((g=u.current)===null||g===void 0||g.call(u),f.current=x,m.current=r,u.current=t())}),Me(()=>{var g;(g=u.current)===null||g===void 0||g.call(u),a.current=!1})},Be=$e(l.useEffect);function Ve(e,n){const[t,r]=l.useState(),[h,a]=l.useState();return Be(()=>{const f=Q(e);if(!f)return;const m=new IntersectionObserver(u=>{for(const g of u)a(g.intersectionRatio),r(g.isIntersecting)},Object.assign(Object.assign({},n),{root:Q(n==null?void 0:n.root)}));return m.observe(f),()=>{m.disconnect()}},[],e),[t,h]}const He=()=>{const[,e]=l.useState({});return l.useCallback(()=>e({}),[])};function We(e){const n=l.useRef(e);n.current=l.useMemo(()=>e,[e]);const t=l.useRef();return t.current||(t.current=function(...r){return n.current.apply(this,r)}),t.current}function de(e){const{value:n,defaultValue:t,onChange:r}=e,h=He(),a=l.useRef(n!==void 0?n:t);n!==void 0&&(a.current=n);const f=We((m,u)=>{const g=typeof m=="function"?m(a.current):m;!u&&g===a.current||(a.current=g,h(),r==null||r(g))});return[a.current,f]}const fe=N.createContext({}),[U]=k("button"),Ue=e=>{const{color:n,loading:t,className:r,hairline:h,loadingText:a,round:f,square:m,plain:u,block:g,loadingType:S,nativeType:x,iconPosition:b}=e,O=X(e,["color","loading","className","hairline","loadingText","round","square","plain","block","loadingType","nativeType","iconPosition"]),{parent:o}=l.useContext(fe),R=N.useMemo(()=>e.size||(o==null?void 0:o.size)||"normal",[o==null?void 0:o.size,e.size]),w=N.useMemo(()=>e.type||(o==null?void 0:o.type)||"default",[o==null?void 0:o.type,e.type]),j=N.useMemo(()=>u??(o==null?void 0:o.plain),[o==null?void 0:o.plain,u]),y=N.useMemo(()=>g??(o==null?void 0:o.block),[o==null?void 0:o.block,g]),T=N.useMemo(()=>b||(o==null?void 0:o.iconPosition)||"left",[o==null?void 0:o.iconPosition,b]),p=N.useMemo(()=>{var v;return(v=e.disabled)!==null&&v!==void 0?v:o==null?void 0:o.disabled},[o==null?void 0:o.disabled,e.disabled]),L=N.useMemo(()=>x||(o==null?void 0:o.nativeType)||"button",[o==null?void 0:o.nativeType,x]),F=N.useMemo(()=>e.tag||(o==null?void 0:o.tag)||"button",[o==null?void 0:o.tag,e.tag]),B=d(r,U([w,R,{plain:j,loading:t,disabled:p,hairline:h,block:y,round:f,square:m}]),{[ve]:h},e.shadow&&`${ce}--${+e.shadow}`),I=Object.assign({},e.style);n&&(I.color=j?n:he,j||(I.background=n),n.indexOf("gradient")!==-1?I.border=0:I.borderColor=n);const V=v=>{!t&&!p&&e.onClick&&e.onClick(v)},H=()=>{if(t){const{loadingSize:v="20px"}=e;return s.jsx(ee,{className:d(U("loading")),size:v,type:S,color:w==="default"?void 0:""})}return null},_=()=>e.loading?H():e.icon?N.cloneElement(e.icon,{className:d(U("icon"))}):null,i=()=>{let v;return t?v=a:v=e.children||e.text,v?s.jsx("span",Object.assign({className:d(U("text"))},{children:v}),"text"):null},c=()=>s.jsxs("div",Object.assign({className:d(U("content"))},{children:[T==="left"&&_(),i(),T==="right"&&_()]}));return s.jsx(F,Object.assign({},O,{disabled:p,className:B,style:I,type:L,onClick:V},{children:c()}))},[Ke]=k("button-group"),De=e=>{var{className:n,style:t,children:r,onClick:h}=e,a=X(e,["className","style","children","onClick"]);const f=m=>{a.disabled||h==null||h(m)};return s.jsx("div",Object.assign({onClick:f,style:t,className:d(n,Ke([a.type,{round:a.round,plain:a.plain,disabled:a.disabled}]),a.shadow&&`${ce}--${+a.shadow}`)},{children:s.jsx(fe.Provider,Object.assign({value:{parent:a}},{children:r}))}))},q=Object.assign(Ue,{Group:De}),Ye=e=>l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},e),l.createElement("path",{d:"M500 55.556c245.46 0 444.444 198.984 444.444 444.444S745.46 944.444 500 944.444 55.556 745.46 55.556 500 254.54 55.556 500 55.556zm176.441 267.887c-10.848-10.848-28.436-10.848-39.284 0L499.665 460.936 362.172 323.443c-10.848-10.848-28.436-10.848-39.284 0-10.848 10.848-10.848 28.436 0 39.284L460.38 500.22 322.888 637.713c-10.848 10.848-10.848 28.436 0 39.284 10.848 10.848 28.436 10.848 39.284 0l137.493-137.493 137.492 137.493c10.848 10.848 28.436 10.848 39.284 0 10.848-10.848 10.848-28.436 0-39.284L538.948 500.22l137.493-137.493c10.848-10.848 10.848-28.436 0-39.284z",fillRule:"evenodd"})),Z=l.forwardRef((e,n)=>l.createElement(te,Object.assign({name:"SvgClear"},e,{ref:n}),l.createElement(Ye,null))),Ge=e=>l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},e),l.createElement("path",{d:"M389.334 167l-18.5 55.556H111.556v388.889l71.833-71.833c20.051-20.052 51.558-21.594 73.372-4.628l5.24 4.628 71.777 71.833 102.89-123.5L556 667l-55.556 166.667h-388.89c-28.476 0-51.97-21.46-55.181-49.08L56 778.112V222.556c0-28.528 21.46-51.978 49.08-55.183l6.476-.373h277.778zm500 0c28.528 0 51.978 21.412 55.183 49.07l.373 6.486v555.556c0 28.476-21.412 51.97-49.07 55.182l-6.486.374H611.556L667.112 667 498.389 413.889l71.112-85.278c20.533-24.681 57.182-26.569 80.135-5.481l4.698 4.87 235 274.167V222.556H481.945l18.5-55.556h388.89zM306.028 278.089c15.508 0 30.03 4.243 42.47 11.63l-14.72 43.948 45.282 67.904c-14.188 25.737-41.585 43.185-73.032 43.185-46 0-83.333-37.333-83.333-83.334 0-46 37.333-83.333 83.333-83.333z",fillRule:"evenodd"})),qe=l.forwardRef((e,n)=>l.createElement(te,Object.assign({name:"SvgPhotoFail"},e,{ref:n}),l.createElement(Ge,null))),Xe=e=>l.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},e),l.createElement("path",{d:"M305.583 277.756c-46 0-83.333 37.333-83.333 83.333s37.333 83.333 83.333 83.333 83.334-37.333 83.334-83.333-37.334-83.333-83.334-83.333m348.306 49.91c-22.333-26.11-62.833-25.833-84.833.612L333.333 611.11l-71.777-71.833c-21.723-21.722-56.89-21.722-78.612 0l-71.833 71.833V222.222H888.89v379.611l-235-274.166zm235-161H111.11c-30.667 0-55.555 24.834-55.555 55.556v555.555c0 30.667 24.888 55.556 55.555 55.556H888.89c30.722 0 55.555-24.889 55.555-55.555V222.222c0-30.722-24.833-55.555-55.555-55.555z",fillRule:"evenodd"})),me=l.forwardRef((e,n)=>l.createElement(te,Object.assign({name:"SvgPhoto"},e,{ref:n}),l.createElement(Xe,null))),[K]=k("input"),Je=l.forwardRef((e,n)=>{const t=$(e,{clearIcon:s.jsx(Z,{}),clearTrigger:"focus",defaultValue:""}),r=l.useRef(),[h,a]=l.useState(!1),f=l.useRef(!1),[m,u]=de(t),{className:g,style:S,align:x,type:b,name:O,placeholder:o,disabled:R,readOnly:w,maxLength:j,autoFocus:y}=t,T=()=>{r!=null&&r.current&&r.current.focus()},p=()=>{r!=null&&r.current&&r.current.blur()};l.useImperativeHandle(n,()=>({clear:()=>{u("")},focus:T,blur:p,get nativeElement(){return r.current}}));const L=l.useMemo(()=>{if(t.clearable&&!w){const _=m!=="",i=t.clearTrigger==="always"||t.clearTrigger==="focus"&&h;return _&&i}return!1},[m,t.clearTrigger,h]),z=_=>{var i;let c=_;if(!f.current&&(G(j)&&c.length>+j&&(c=c.slice(0,j),(i=t.onOverlimit)===null||i===void 0||i.call(t)),b==="number"||b==="digit")){const v=b==="number";c=Le(c,v,v)}u(c)},F=_=>{var i;a(!0),(i=t.onFocus)===null||i===void 0||i.call(t,_),w&&p()},B=_=>{var i;a(!1),(i=t.onBlur)===null||i===void 0||i.call(t,_),ue()},I=_=>{var i;(_.key==="Enter"||+_.charCode==13)&&(_e(_),t.type==="search"&&p()),(i=t.onKeyPress)===null||i===void 0||i.call(t,_)},V=()=>{let _=b,i;return b==="number"&&(_="text",i="decimal"),b==="digit"&&(_="tel",i="numeric"),s.jsx("input",{value:m,type:_,inputMode:i,ref:r,name:O,className:d(K("control")),disabled:R,autoFocus:y,readOnly:w,placeholder:o||"",onBlur:B,onFocus:F,onChange:c=>{var v;return z((v=c==null?void 0:c.currentTarget)===null||v===void 0?void 0:v.value)},onKeyPress:I,autoCapitalize:t.autoCapitalize,autoCorrect:t.autoCorrect,onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp,onCompositionStart:c=>{var v;f.current=!0,(v=t.onCompositionStart)===null||v===void 0||v.call(t,c)},onCompositionEnd:c=>{var v,A;f.current=!1,(v=t.onCompositionEnd)===null||v===void 0||v.call(t,c),z((A=c==null?void 0:c.currentTarget)===null||A===void 0?void 0:A.value)},onClick:t.onClick})},H=_=>{var i;u(""),(i=t.onClear)===null||i===void 0||i.call(t,_)};return s.jsxs("div",Object.assign({className:d(K([x]),g),style:S},{children:[t.prefix&&s.jsx("div",Object.assign({className:d(K("prefix"))},{children:t.prefix})),V(),L&&N.cloneElement(t.clearIcon||s.jsx(Z,{}),{className:d(K("clear")),onTouchStart:H}),t.suffix&&s.jsx("div",Object.assign({className:d(K("suffix"))},{children:t.suffix}))]}))}),[D]=k("textarea"),Qe=l.forwardRef((e,n)=>{const t=$(e,{rows:2,clearIcon:s.jsx(Z,{}),clearTrigger:"focus",defaultValue:""}),[r,h]=l.useState(!1),a=l.useRef(),f=l.useRef(!1),[m,u]=de(t),{className:g,style:S,name:x,rows:b,placeholder:O,disabled:o,readOnly:R,maxLength:w,showWordLimit:j,autoFocus:y}=t,T=()=>{a!=null&&a.current&&a.current.focus()},p=()=>{a!=null&&a.current&&a.current.blur()};l.useImperativeHandle(n,()=>({clear:()=>{u("")},focus:T,blur:p,get nativeElement(){return a.current}}));const L=()=>{const i=a.current;if(!i)return;i.style.height="auto";let c=i.scrollHeight;if(be(t.autoSize)){const{maxHeight:v,minHeight:A}=t.autoSize;v&&(c=Math.min(c,v)),A&&(c=Math.max(c,A))}c&&(i.style.height=`${c}px`)};l.useEffect(()=>{L()},[m]);const z=N.useMemo(()=>D("control",[{"min-height":!t.autoSize,clear:t.clearable}]),[t.autoSize]),F=i=>{var c;let v=i;f.current||G(w)&&v.length>+w&&(v=v.slice(0,w),(c=t.onOverlimit)===null||c===void 0||c.call(t)),u(v)},B=i=>{var c;h(!0),(c=t.onFocus)===null||c===void 0||c.call(t,i),R&&p()},I=i=>{var c;h(!1),(c=t.onBlur)===null||c===void 0||c.call(t,i),ue()},V=()=>{if(j){const i=(m?`${m}`:"").length;return s.jsx("div",Object.assign({className:d(D("word-limit"))},{children:typeof j=="function"?j({currentCount:i,maxLength:w}):s.jsxs(s.Fragment,{children:[s.jsx("span",Object.assign({className:d(D("word-num"))},{children:i})),w?`/${w}`:!1]})}))}return null},H=i=>{var c;u(""),(c=t.onClear)===null||c===void 0||c.call(t,i)},_=l.useMemo(()=>{if(t.clearable&&!R){const i=m!=="",c=t.clearTrigger==="always"||t.clearTrigger==="focus"&&r;return i&&c}return!1},[m,t.clearTrigger,r]);return s.jsxs("div",Object.assign({className:d(D(),g),style:S},{children:[s.jsx("textarea",{ref:a,name:x,rows:b,className:d(z),value:m,disabled:o,autoFocus:y,readOnly:R,placeholder:O||"",onBlur:I,onFocus:B,onChange:i=>{var c;return F((c=i==null?void 0:i.currentTarget)===null||c===void 0?void 0:c.value)},onKeyPress:t.onKeyPress,onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp,autoComplete:t.autoComplete,onCompositionStart:i=>{var c;f.current=!0,(c=t.onCompositionStart)===null||c===void 0||c.call(t,i)},onCompositionEnd:i=>{var c,v;f.current=!1,(c=t.onCompositionEnd)===null||c===void 0||c.call(t,i),F((v=i==null?void 0:i.currentTarget)===null||v===void 0?void 0:v.value)},onClick:t.onClick}),_&&N.cloneElement(t.clearIcon,{className:d(D("clear")),onTouchStart:H}),V()]}))}),ae=Object.assign(Je,{TextArea:Qe}),[M]=k("image"),oe=e=>{const[n,t]=Fe({loading:!0,error:!1}),r=l.useRef(null),{fit:h,errorIcon:a,loadingIcon:f,showError:m,showLoading:u,block:g}=e,S=l.useMemo(()=>{const j=Object.assign({},e.style);return G(e.width)&&(j.width=P(e.width)),G(e.height)&&(j.height=P(e.height)),G(e.radius)&&(j.overflow="hidden",j.borderRadius=P(e.radius)),j},[e.style,e.width,e.height,e.radius]);l.useEffect(()=>{const j={error:!1,loading:!0};r.current&&(r.current.complete?j.loading=!1:j.loading=!0),t(j)},[e.src]);const x=j=>{var y;t({loading:!1}),(y=e.onLoad)===null||y===void 0||y.call(e,j)},b=j=>{var y;t({error:!0,loading:!1}),(y=e.onLoad)===null||y===void 0||y.call(e,j)},O=()=>f?N.cloneElement(f,{className:d(M("loading-icon")),fontSize:e.iconSize}):null,o=()=>a?N.cloneElement(a,{className:d(M("error-icon")),fontSize:e.iconSize}):null,R=()=>n.loading&&u?s.jsx("div",Object.assign({className:d(M("loading")),onClick:e.onClick},{children:O()})):n.error&&m?s.jsx("div",Object.assign({className:d(M("error")),onClick:e.onClick},{children:o()})):null,w=()=>{if(n.error||!e.src)return null;const j={className:d(M("img")),style:{objectFit:h}};return s.jsx("img",Object.assign({ref:r,alt:e.alt||"img",src:e.src,onLoad:x,onError:b},j))};return s.jsxs("div",Object.assign({className:d(e.className,M({block:g,round:e.round})),style:S,onClick:e.onClick},{children:[w(),R(),e.children]}))},re="100%",Ze="60%",[Y]=k("skeleton"),et=e=>{var{children:n,className:t,style:r}=e,h=X(e,["children","className","style"]);const a=$(h,{loading:!0,animate:!0,round:!0,row:3,avatarShape:"round",rowWidth:re}),f=x=>{const{rowWidth:b}=a;return b===re&&x===+a.row-1&&x!==0?Ze:Array.isArray(b)?b[x]:b},m=x=>{const{rowHeight:b}=a;return Array.isArray(b)?b[x]:b},u=()=>a.avatar?s.jsx("div",{className:d(Y("avatar",a.avatarShape)),style:je(a.avatarSize)}):null,g=()=>{if(a.title){const x=P(a.titleWidth),b=P(m(0));return s.jsx("div",{className:d(Y("title")),style:{width:x,height:b}})}return null},S=()=>Array(a.row).fill("").map((x,b)=>{const O=P(f(b)),o=P(m(b));return s.jsx("div",{className:d(Y("row")),style:{width:O,height:o}},b)});return a.loading?s.jsxs("div",Object.assign({className:d(t,Y({animate:a.animate,round:a.round})),style:r},{children:[u(),s.jsxs("div",Object.assign({className:d(Y("content"))},{children:[g(),S()]}))]})):s.jsx(s.Fragment,{children:n})},[tt]=k("lazyload"),nt=e=>{const n=$(e,{placeholder:s.jsx(et,{title:!0})}),t=l.useRef(),[r]=Ve(t),{height:h,placeholder:a,children:f,className:m,style:u}=n;return r?s.jsx(s.Fragment,{children:f}):s.jsx("div",Object.assign({ref:t,className:d(tt(),m),style:Object.assign({height:h},u)},{children:a}))},le=e=>s.jsx("div",Object.assign({className:d(e("loading"))},{children:s.jsx(me,{className:d(e("loading-icon"))})})),[J]=k("image"),st=e=>{const n=$(e,{fit:"fill",errorIcon:s.jsx(qe,{}),loadingIcon:s.jsx(me,{}),showError:!0,showLoading:!0,block:!0}),{lazyload:t}=n,r=X(n,["lazyload"]),h=()=>typeof t=="boolean"?le(J):t.placeholder||le(J);if(t){const{className:a,style:f,height:m,width:u}=r,g={className:d(a,J({block:r.block})),style:Object.assign(Object.assign({},f),{height:m,width:u})};return s.jsx(nt,Object.assign({},g,{placeholder:h()},{children:s.jsx(oe,Object.assign({},r))}))}return s.jsx(oe,Object.assign({},r))},at=Symbol("image"),ot=Object.assign(st,{[xe]:at}),[E]=k("action-sheet"),rt=e=>{const n=$(e,{closeable:!0,safeAreaInsetBottom:!0,round:!0,lockScroll:!0,overlay:!0,closeOnClickOverlay:!0,closeIcon:s.jsx(we,{})}),t=()=>{var u,g;(u=n.onClose)===null||u===void 0||u.call(n),(g=n.onCancel)===null||g===void 0||g.call(n)},r=()=>n.title?s.jsxs("div",Object.assign({className:d(E("header"))},{children:[n.title,n.closeable&&N.cloneElement(n.closeIcon,{className:d(E("clear")),onClick:t})]})):null,h=()=>n.cancelText?[s.jsx("div",{className:d(E("gap"))},"cancel-gap"),s.jsx("button",Object.assign({type:"button",className:d(E("cancel")),onClick:t},{children:n.cancelText}),"cancel-btn")]:null,a=(u,g)=>{const{name:S,color:x,subname:b,loading:O,callback:o,disabled:R,className:w,style:j}=u,y=O?s.jsx(ee,{className:d(E("loading-icon"))}):[s.jsx("span",Object.assign({className:d(E("name"))},{children:S}),`${g}-1`),b&&s.jsx("div",Object.assign({className:d(E("subname"))},{children:b}),`${g}-2`)],T=()=>{R||O||(o&&o(u),n.closeOnClickAction&&t(),setTimeout(()=>{var p;(p=n.onSelect)===null||p===void 0||p.call(n,u,g)},0))};return s.jsx("button",Object.assign({type:"button",style:Object.assign({color:x},j),className:d(E("item",{loading:O,disabled:R}),w),onClick:T},{children:y}),g)},f=()=>n.description?s.jsx("div",Object.assign({className:d(E("description"))},{children:n.description})):null,m=()=>n.actions?n.actions.map(a):null;return s.jsx(pe,Object.assign({visible:n.visible,className:d(E("wrapper")),position:"bottom"},ye(n,Ne),{onClose:t,closeable:!1},{children:s.jsxs("div",Object.assign({className:d(E(),n.className),style:n.style},{children:[r(),f(),s.jsxs("div",Object.assign({className:d(E("content"))},{children:[m(),n.children]})),h()]}))}))},lt="_container_1yn1w_51",it="_userInfo_1yn1w_79",ct="_avatarContainer_1yn1w_97",ut="_avatar_1yn1w_97",dt="_avatarLoading_1yn1w_139",ft="_userText_1yn1w_155",mt="_nickname_1yn1w_167",gt="_status_1yn1w_203",vt="_editContainer_1yn1w_237",ht="_editInput_1yn1w_251",bt="_editButtons_1yn1w_269",jt="_tips_1yn1w_311",xt="_badges_1yn1w_313",yt="_settings_1yn1w_315",Ct="_tipCard_1yn1w_331",_t="_badgeList_1yn1w_347",wt="_badge_1yn1w_313",pt="_settingsList_1yn1w_379",Nt="_settingItem_1yn1w_391",C={container:lt,userInfo:it,avatarContainer:ct,avatar:ut,avatarLoading:dt,userText:ft,nickname:mt,status:gt,editContainer:vt,editInput:ht,editButtons:bt,tips:jt,badges:xt,settings:yt,tipCard:Ct,badgeList:_t,badge:wt,settingsList:pt,settingItem:Nt},It=()=>{Ce("我的小天地");const e=Se(),{userInfo:n,setUserInfo:t}=e,[r,h]=l.useState(null),[a,f]=l.useState(""),[m,u]=l.useState(!1),[g,S]=l.useState(!1);l.useRef(0);const x=l.useRef(null),b=[{name:"AI生成头像",color:"#ee0a24",type:1},{name:"上传头像",color:"#123123",type:2}],O=async j=>{if(u(!1),j.type===1)try{S(!0);const y=`昵称: ${n.nickname}
个性签名: ${n.status}`,T=await Oe(y);T&&(T.startsWith("http")||T.startsWith("data:"))?(e.setUserInfo({avatar:T}),W.success("头像生成成功！")):W.fail("头像生成失败，请重试")}catch(y){console.error("生成头像失败:",y),W.fail("头像生成失败，请稍后再试")}finally{S(!1)}else if(j.type===2){const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=T=>{const p=T.target.files[0];if(p){const L=new FileReader;L.onload=z=>{e.setUserInfo({avatar:z.target.result}),W.success("头像上传成功！")},L.readAsDataURL(p)}},y.click()}},o=j=>{h(j),f(n[j]),setTimeout(()=>{var y;return(y=x.current)==null?void 0:y.focus()},100)},R=()=>{a.trim()&&(e.setUserInfo({[r]:a}),W.success("修改成功！")),h(null)},w=()=>{h(null)};return s.jsxs("div",{className:C.container,children:[s.jsxs("section",{className:C.userInfo,children:[s.jsxs("div",{className:C.avatarContainer,children:[s.jsx(ot,{round:!0,src:n.avatar,alt:"头像",className:C.avatar,onClick:()=>u(!0)}),g&&s.jsx(ee,{className:C.avatarLoading})]}),s.jsxs("div",{className:C.userText,children:[r==="nickname"?s.jsxs("div",{className:C.editContainer,children:[s.jsx(ae,{ref:x,value:a,onChange:f,className:C.editInput}),s.jsxs("div",{className:C.editButtons,children:[s.jsx(q,{size:"small",onClick:R,children:"保存"}),s.jsx(q,{size:"small",plain:!0,onClick:w,children:"取消"})]})]}):s.jsx("h2",{className:C.nickname,onClick:()=>o("nickname"),children:n.nickname}),r==="status"?s.jsxs("div",{className:C.editContainer,children:[s.jsx(ae,{ref:x,value:a,onChange:f,className:C.editInput}),s.jsxs("div",{className:C.editButtons,children:[s.jsx(q,{size:"small",onClick:R,children:"保存"}),s.jsx(q,{size:"small",plain:!0,onClick:w,children:"取消"})]})]}):s.jsx("p",{className:C.status,onClick:()=>o("status"),children:n.status})]})]}),s.jsxs("section",{className:C.tips,children:[s.jsx("h3",{children:"🐾 Kitty 小贴士"}),s.jsx("div",{className:C.tipCard,children:"多喝热水，保持好心情"})]}),s.jsxs("section",{className:C.badges,children:[s.jsx("h3",{children:"🏅 我的勋章"}),s.jsxs("div",{className:C.badgeList,children:[s.jsx("div",{className:C.badge,children:"📅 连续打卡 7 天"}),s.jsx("div",{className:C.badge,children:"💬 聊天 100 次"})]})]}),s.jsxs("section",{className:C.settings,children:[s.jsx("h3",{children:"⚙️ 应用设置"}),s.jsxs("ul",{className:C.settingsList,children:[s.jsx("li",{className:C.settingItem,children:"账号设置"}),s.jsx("li",{className:C.settingItem,children:"安全与隐私"}),s.jsx("li",{className:C.settingItem,children:"通知与提醒"})]})]}),s.jsx(rt,{visible:m,actions:b,cancelText:"取消",onCancel:()=>u(!1),onSelect:O})]})};export{It as default};
