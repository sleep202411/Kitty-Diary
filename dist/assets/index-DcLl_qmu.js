import{r as n,j as e}from"./index-5URFNoGD.js";import{u as k}from"./useTitle-CQM8J28J.js";const I="_storyContainer_1vodz_31",P="_inputPanel_1vodz_69",T="_textInput_1vodz_117",H="_styleSelector_1vodz_181",O="_styleSelect_1vodz_181",E="_generateButton_1vodz_279",J="_storyCard_1vodz_345",D="_cardHeader_1vodz_413",R="_styleBadge_1vodz_449",$="_storyContent_1vodz_475",U="_regenerateButton_1vodz_515",s={storyContainer:I,inputPanel:P,textInput:T,styleSelector:H,styleSelect:O,generateButton:E,storyCard:J,cardHeader:D,styleBadge:R,storyContent:$,regenerateButton:U},G=()=>{var p,g;k("æ•…äº‹å®ç®±");const S="pat_BW3DvOatetgn6JG5hU112l6oCKxhpp52vACcPBJSyhkenqdfk9Bqp95nH6TrWLrw",x="https://api.coze.cn/v1/workflow/run",f="7537625801082077234",[i,w]=n.useState(""),[o,C]=n.useState("random"),[a,B]=n.useState(null),[_,l]=n.useState(""),[v,d]=n.useState(!1),u=[{value:"random",label:"ä»»æ„é£æ ¼",emoji:"ğŸ²"},{value:"fantasy",label:"å¥‡å¹»å†’é™©",emoji:"ğŸ§™â€â™‚ï¸"},{value:"sci-fi",label:"ç§‘å¹»æœªæ¥",emoji:"ğŸš€"},{value:"fairy-tale",label:"ç»å…¸ç«¥è¯",emoji:"ğŸ°"},{value:"mystery",label:"æ‚¬ç–‘æ¨ç†",emoji:"ğŸ”"},{value:"animal",label:"åŠ¨ç‰©ä¸–ç•Œ",emoji:"ğŸ¾"},{value:"historical",label:"å†å²ä¼ å¥‡",emoji:"â³"}],h=async(t=!1)=>{try{if(!i.trim()){l("è¯·è¾“å…¥å…³é”®è¯");return}t?d(!0):l("ç”Ÿæˆä¸­...");const r={user_input:i};o!=="random"&&(r.story_style=o);const c=await fetch(x,{method:"POST",headers:{Authorization:`Bearer ${S.trim()}`,"Content-Type":"application/json"},body:JSON.stringify({workflow_id:f,parameters:r})});if(!c.ok){const m=await c.json();throw new Error(m.msg||`HTTPé”™è¯¯: ${c.status}`)}const N=await c.text();let y;try{y=JSON.parse(N)}catch(m){throw new Error(`å“åº”è§£æå¤±è´¥: ${m.message}`)}if(!y.data)throw new Error("æ— æ•ˆçš„å“åº”æ ¼å¼");const j=JSON.parse(y.data),z={title:j.story_title||"æœªå‘½åæ•…äº‹",content:j.story_content||"æœªèƒ½ç”Ÿæˆå†…å®¹",style:o};B(z),l("ç”ŸæˆæˆåŠŸï¼"),d(!1)}catch(r){console.error("ç”Ÿæˆå¤±è´¥:",r),l(`é”™è¯¯: ${r.message}`),d(!1)}},b=()=>{h(!0)};return e.jsxs("div",{className:s.storyContainer,children:[e.jsxs("div",{className:s.inputPanel,children:[e.jsx("h2",{children:"âœ¨ æ•…äº‹å®ç®± âœ¨"}),e.jsx("textarea",{value:i,onChange:t=>w(t.target.value),placeholder:"è¾“å…¥å…³é”®è¯æˆ–çµæ„Ÿ (ä¾‹å¦‚ï¼šå¤ªç©ºçŒ«ã€é­”æ³•é’¥åŒ™ã€ä¼šè·³èˆçš„æ˜Ÿæ˜Ÿ...)",className:s.textInput,rows:5}),e.jsxs("div",{className:s.styleSelector,children:[e.jsx("label",{children:"æ•…äº‹é£æ ¼ï¼š"}),e.jsx("select",{value:o,onChange:t=>C(t.target.value),className:s.styleSelect,children:u.map(t=>e.jsxs("option",{value:t.value,children:[t.emoji," ",t.label]},t.value))})]}),e.jsx("button",{onClick:()=>h(!1),disabled:_.includes("ç”Ÿæˆ"),className:s.generateButton,children:_||"ç”Ÿæˆæ•…äº‹"})]}),a&&e.jsxs("div",{className:s.storyCard,children:[e.jsxs("div",{className:s.cardHeader,children:[e.jsx("h3",{children:String(a.title)}),e.jsxs("span",{className:s.styleBadge,children:[((p=u.find(t=>t.value===a.style))==null?void 0:p.emoji)||"ğŸ“–",((g=u.find(t=>t.value===a.style))==null?void 0:g.label)||"æ•…äº‹"]})]}),e.jsx("div",{className:s.storyContent,children:a.content}),e.jsx("button",{onClick:b,disabled:v,className:s.regenerateButton,children:v?"æ­£åœ¨ç”Ÿæˆ...":"å†æ¬¡ç”Ÿæˆ"})]})]})};export{G as default};
